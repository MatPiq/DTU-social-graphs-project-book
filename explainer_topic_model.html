
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>hSBM Topic Modelling &#8212; The Social Science Network</title>
    
  <link href="_static/css/theme.css" rel="stylesheet">
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe,.cell"
        const thebe_selector_input = "pre,.cell_input div.highlight"
        const thebe_selector_output = ".output,.cell_output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Document and Node Embeddings" href="explainer_embeddings.html" />
    <link rel="prev" title="Community detection" href="explainer_community_detection.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/logo.gif" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">The Social Science Network</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="intro.html">
   About this page
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="main.html">
   Main
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="main_data.html">
     Data Description
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="main_results.html">
     Main Results
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference external" href="https://projector.tensorflow.org/?config=https://raw.githubusercontent.com/MatPiq/social-graphs-embeddings-data/main/document_config.json">
     Document Embeddings
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference external" href="https://projector.tensorflow.org/?config=https://raw.githubusercontent.com/MatPiq/social-graphs-embeddings-data/main/node_config.json">
     Node Embeddings
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="explainer.html">
   Explainer Notebook
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="explainer_motivation.html">
     Motivation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="explainer_data_collection.html">
     Data Collection
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="explainer_basicstats.html">
     Descriptive Statistics
    </a>
   </li>
   <li class="toctree-l2 current active has-children">
    <a class="reference internal" href="explainer_analysis.html">
     Theory, Methods and Analysis
    </a>
    <input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
    <label for="toctree-checkbox-3">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul class="current">
     <li class="toctree-l3">
      <a class="reference internal" href="explainer_community_detection.html">
       Community detection
      </a>
     </li>
     <li class="toctree-l3 current active">
      <a class="current reference internal" href="#">
       hSBM Topic Modelling
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="explainer_embeddings.html">
       Document and Node Embeddings
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="explainer_discussion.html">
     Discussion
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="explainer_contributions.html">
     Contributions
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="references.html">
   References
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/explainer_topic_model.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/MatPiq/DTU-social-graphs-project-book/HEAD/v2/gh/MatPiq/DTU-social-graphs-project-book/master?urlpath=lab/tree/explainer_topic_model.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <a class="colab-button" href="https://colab.research.google.com/github/MatPiq/DTU-social-graphs-project-book/blob/master/explainer_topic_model.ipynb"><button type="button" class="btn btn-secondary topbarbtn"
                title="Launch Colab" data-toggle="tooltip" data-placement="left"><img class="colab-button-logo"
                    src="_static/images/logo_colab.png"
                    alt="Interact on Colab">Colab</button></a>
        
        <button type="button" class="btn btn-secondary topbarbtn"
            onclick="initThebeSBT()" title="Launch Thebe" data-toggle="tooltip" data-placement="left"><i
                class="fas fa-play"></i><span style="margin-left: .4em;">Live Code</span></button>
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   hSBM Topic Modelling
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id1">
     hSBM Topic Modelling
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#bipartite-network-of-10-topics-articles">
     Bipartite network of 10 topics-articles
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#insert-interactive-graph-of-topics-articles">
   insert interactive graph of topics-articles
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="hsbm-topic-modelling">
<span id="explainer-topic-model"></span><h1>hSBM Topic Modelling<a class="headerlink" href="#hsbm-topic-modelling" title="Permalink to this headline">¶</a></h1>
<p>In this section we introduce part of our text analysis, namely the part which pertains to our topic modelling approach. Topic models are mainly used to cluster a collection of documents into different so-called ‘topics’. In oue analysis, we choose relevant topics, extract their topic distributions and visualize the words for each topic to demonstrate how and in which areas the different disciplines tend to interact on Wikipedia.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import relevant modules</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">joblib</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">from</span> <span class="nn">wordcloud</span> <span class="kn">import</span> <span class="n">WordCloud</span>
<span class="kn">import</span> <span class="nn">matplotlib.colors</span> <span class="k">as</span> <span class="nn">mcolors</span>
<span class="kn">import</span> <span class="nn">networkx</span> <span class="k">as</span> <span class="nn">nx</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span><span class="p">,</span> <span class="n">Image</span><span class="p">,</span> <span class="n">set_matplotlib_formats</span>
<span class="kn">import</span> <span class="nn">ast</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">rc</span>
<span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;science&#39;</span><span class="p">)</span>
<span class="n">set_matplotlib_formats</span><span class="p">(</span><span class="s1">&#39;svg&#39;</span><span class="p">)</span>
<span class="n">rc</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">,</span> <span class="n">usetex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># load data</span>
<span class="n">path</span> <span class="o">=</span> <span class="s1">&#39;/Users/emiliemunchgregersen/Downloads&#39;</span>
<span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

<span class="c1"># wikipedia data</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;wiki_df_new.csv.gz&#39;</span><span class="p">,</span> <span class="n">compression</span> <span class="o">=</span> <span class="s1">&#39;gzip&#39;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;Unnamed: 0&#39;</span><span class="p">,</span> <span class="n">axis</span> <span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">tokens</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">tokens</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="nb">eval</span><span class="p">)</span>
<span class="n">new_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">parent</span><span class="o">+</span> <span class="s1">&#39;-&#39;</span> <span class="o">+</span> <span class="n">df</span><span class="o">.</span><span class="n">title</span><span class="p">))</span>
<span class="n">new_names</span> <span class="o">=</span> <span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="nb">tuple</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">new_names</span><span class="p">)]</span>

<span class="c1"># hSBM data</span>
<span class="n">topic_dist_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;topic_dist_df.csv&#39;</span><span class="p">)</span>
<span class="n">topic_dist_df</span> <span class="o">=</span> <span class="n">topic_dist_df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;Unnamed: 0&#39;</span><span class="p">,</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;topics_l1.json&#39;</span><span class="p">)</span>
<span class="n">topics_l1</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="c1"># topics at level 1 returning 20 most probable words</span>
<span class="n">topics_l1</span> <span class="o">=</span> <span class="p">{</span><span class="nb">int</span><span class="p">(</span><span class="n">k</span><span class="p">):</span><span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">topics_l1</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>

<span class="c1"># network data </span>
<span class="n">word_nx</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;word_bipartite_df.csv&#39;</span><span class="p">)</span>
<span class="n">word_nx</span> <span class="o">=</span> <span class="n">word_nx</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;Unnamed: 0&#39;</span><span class="p">,</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">bipart_nx</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;bipartite_df.csv&#39;</span><span class="p">)</span>
<span class="n">bipart_nx</span> <span class="o">=</span> <span class="n">bipart_nx</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;Unnamed: 0&#39;</span><span class="p">,</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id1">
<h2>hSBM Topic Modelling<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>Inspired by the approach set forth by <a class="reference external" href="https://www.science.org/doi/10.1126/sciadv.aaq1360">Gerlach et al. 2018</a>, we show the hierarchical clustering of documents and words from our wikipedia dataset for all six scientific disciplines using a <strong>hierarchical Stochastic Block Model</strong> (hSBM). We only consider words that appear more than ten times in the text corpus and end up with 4810 articles or in our case, nodes. As opposed to other popular topic models such as LDA, we do not need to specify number of groups, levels or topics beforehand, since hSBM automatically detects these parameters. The model is inspired by community detection in networks and creates a bipartite-like network of words and documents. It splits the network into groups on different hierarchical levels organized as a tree. On each level, the hSBM clusters the documents and words in varying group sizes.</p>
<p>We have fed the model with data consisting of preprocessed tokens from each Wikipedia article where we remove infrequent tokens with a threshold at minimum 10 occurences per token. We are able to extract the documents from the model using the document number which corresponds to the index from our dataframe. We have merged the title of each article with the discipline from which it originates i.e. ‘Voter Turnout’ becomes ‘political_science-voter_turnout, which we need for the forthcoming analysis.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># plot of the model&#39;s hierarchical layers </span>
<span class="n">Image</span><span class="p">(</span><span class="n">filename</span> <span class="o">=</span> <span class="s1">&#39;/Users/emiliemunchgregersen/Downloads/hSBM.png&#39;</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="mi">50</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/explainer_topic_model_5_0.png" src="_images/explainer_topic_model_5_0.png" />
</div>
</div>
<p>The above image shows the structure of the model. On the left side, we have the documents and on the right side, we see the words. Compared to Gerlach et al.’s visualization (see link), we are not able to detect the different disciplines from this image, however we do find the division on the document-ax interesting as it seems to divide the divide the documents into two overall sections.</p>
<p>We have experimented with extracting topics at different levels of the model (our model has 7 levels). Generally, we find that the topics at level 1 are the most cohesive and specific which is useful for our analysis. We specify that the model should return the 20 most probable words per topic (remember the model itself chooses number of topics). The model generates 76 topics on level 1 which span from very method-related to more theme or topic-specific such as ‘socialism’ or ‘US politics’. On level 2, we find 15 topics which are more discipline-related and broader. The lower the level, the less semantically cohesive the topics. We choose and name 10 topics for our content analysis:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># the 10 topics from level 1 of our model</span>
<span class="n">chosen_topics</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;administrative_science&#39;</span><span class="p">:</span><span class="n">topics_l1</span><span class="p">[</span><span class="mi">7</span><span class="p">],</span> <span class="s1">&#39;market_economy&#39;</span><span class="p">:</span><span class="n">topics_l1</span><span class="p">[</span><span class="mi">18</span><span class="p">],</span> <span class="s1">&#39;museum_anthropology&#39;</span><span class="p">:</span><span class="n">topics_l1</span><span class="p">[</span><span class="mi">23</span><span class="p">],</span>
  <span class="s1">&#39;cognitive_psychology&#39;</span><span class="p">:</span><span class="n">topics_l1</span><span class="p">[</span><span class="mi">25</span><span class="p">],</span> <span class="s1">&#39;academia&#39;</span><span class="p">:</span><span class="n">topics_l1</span><span class="p">[</span><span class="mi">30</span><span class="p">],</span> <span class="s1">&#39;statistical_methods&#39;</span><span class="p">:</span><span class="n">topics_l1</span><span class="p">[</span><span class="mi">32</span><span class="p">],</span> 
   <span class="s1">&#39;socialism&#39;</span><span class="p">:</span><span class="n">topics_l1</span><span class="p">[</span><span class="mi">43</span><span class="p">],</span> <span class="s1">&#39;labour_economics&#39;</span><span class="p">:</span><span class="n">topics_l1</span><span class="p">[</span><span class="mi">53</span><span class="p">],</span> <span class="s1">&#39;class_racialization&#39;</span><span class="p">:</span><span class="n">topics_l1</span><span class="p">[</span><span class="mi">68</span><span class="p">],</span> 
  <span class="s1">&#39;US_politics_SoMe&#39;</span><span class="p">:</span><span class="n">topics_l1</span><span class="p">[</span><span class="mi">75</span><span class="p">]}</span>

<span class="c1"># we create a pandas dataframe for our topics and topic words</span>
<span class="n">topic_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">chosen_topics</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

<span class="n">topic_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">index</span> <span class="o">=</span> <span class="n">topic_names</span><span class="p">)</span>
<span class="n">topic_df</span><span class="p">[</span><span class="s1">&#39;topics&#39;</span><span class="p">]</span> <span class="o">=</span>   <span class="nb">list</span><span class="p">(</span><span class="n">chosen_topics</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>
<p>The topics are chosen based on word clusters we find semantically meaningful and interesting for our query at hand - we choose some we believe to be purely discipline-specific and some which we believe to capture some overlap between disciplines. Our analysis will therefore touch upon patterns and tendencies rather than generalize across our entire dataset. We choose to visualize the word-topics with bar plots of the word prabability distribution in each topic:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot word probability distribution</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">ncols</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>  <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">dpi</span> <span class="o">=</span> <span class="mi">300</span><span class="p">)</span>
<span class="n">axs</span> <span class="o">=</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span>
<span class="n">fig</span><span class="o">.</span><span class="n">delaxes</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">10</span><span class="p">])</span>
<span class="n">fig</span><span class="o">.</span><span class="n">delaxes</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">11</span><span class="p">])</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">topic_df</span><span class="p">)):</span>
    <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">topic_df</span><span class="p">[</span><span class="s2">&quot;topics&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]][::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">topic_df</span><span class="p">[</span><span class="s2">&quot;topics&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]][::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">axs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;k&quot;</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">topic_df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tolist</span><span class="p">()[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">),</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_ticks_position</span><span class="p">(</span><span class="s1">&#39;none&#39;</span><span class="p">)</span> 
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/explainer_topic_model_9_0.svg" src="_images/explainer_topic_model_9_0.svg" /></div>
</div>
<p>From the words, we are already able to get a general idea of what kind of topic to infer. Based on our knowledge of the different disciplines, we are able to get an overall sense of whether we are dealing with an interdisciplinary topic such as ‘statistical methods’ or a disciplinary topic such as cognitive psychology. We do however want to be certain in our assesment and have therefore extracted the topic distribution for each chosen topic and their relation to articles in our corpus. We create clusters of the top 30 articles which are most related to each topic to better name the topics.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># we create a function to extract the relevant data from our topic distributions</span>
<span class="k">def</span> <span class="nf">get_topic_dist</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
    
    <span class="c1"># get the topic</span>
    <span class="n">topic</span> <span class="o">=</span> <span class="n">topics_l1</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
    <span class="c1"># get the words belonging to each topic</span>
    <span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="nb">tuple</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">topic</span><span class="p">)]</span>
    <span class="c1"># and their probabilities</span>
    <span class="n">word_prob</span> <span class="o">=</span> <span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="nb">tuple</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">topic</span><span class="p">)]</span>
    <span class="c1"># get the 30 most probable articles related from the topic distribution</span>
    <span class="n">topic_dist</span> <span class="o">=</span> <span class="n">topic_dist_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)[:</span><span class="mi">30</span><span class="p">]</span>
    <span class="c1"># store their probabilities</span>
    <span class="n">article_probabilities</span> <span class="o">=</span> <span class="p">[</span><span class="n">t</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">topic_dist</span><span class="p">]</span>
    <span class="c1"># and their names</span>
    <span class="n">articles</span> <span class="o">=</span> <span class="p">[</span><span class="n">t</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">topic_dist</span><span class="o">.</span><span class="n">index</span><span class="p">]</span>
    
    <span class="c1">#print(&#39;topic name: &#39; + str(topic))</span>
    <span class="c1">#print(&#39;topic words: &#39; + str(words))</span>
    <span class="c1">#print(&#39;topic distribution: &#39; + str(topic_dist_df.iloc[key].sort_values(ascending = False)[:30]))</span>
    
    <span class="k">return</span> <span class="n">topic_num_names</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="n">article_probabilities</span><span class="p">,</span> <span class="n">articles</span><span class="p">,</span> <span class="n">words</span><span class="p">,</span> <span class="n">word_prob</span>
</pre></div>
</div>
</div>
</div>
<p>Let’s apply the function</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># lists of the different values we need </span>
<span class="n">topics</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">probabilities</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">article_names</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">words</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">word_prob</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># we use our topic distribution function to extract all relevant values</span>
<span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">topic_num</span><span class="p">:</span>
    <span class="n">element</span> <span class="o">=</span> <span class="n">get_topic_dist</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    <span class="n">topics</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">probabilities</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">article_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">words</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
    <span class="n">word_prob</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># let&#39;s take a look at the 20 most probable articles and words for this topic</span>
<span class="n">topic0</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">article_names</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">probabilities</span><span class="p">[</span><span class="mi">0</span><span class="p">])),</span> 
             <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;topic: administrative politics&#39;</span><span class="p">,</span> <span class="s1">&#39;probability&#39;</span><span class="p">])</span>
<span class="n">topic0</span><span class="p">[:</span><span class="mi">20</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>topic: administrative politics</th>
      <th>probability</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>political_science-law_without_the_state</td>
      <td>0.225806</td>
    </tr>
    <tr>
      <th>1</th>
      <td>political_science-exclusive_federal_powers</td>
      <td>0.161017</td>
    </tr>
    <tr>
      <th>2</th>
      <td>economics-economic_power</td>
      <td>0.142857</td>
    </tr>
    <tr>
      <th>3</th>
      <td>political_science-the_province_of_jurisprudenc...</td>
      <td>0.140000</td>
    </tr>
    <tr>
      <th>4</th>
      <td>political_science-concurrent_powers</td>
      <td>0.134021</td>
    </tr>
    <tr>
      <th>5</th>
      <td>political_science-dualism_(law)</td>
      <td>0.133492</td>
    </tr>
    <tr>
      <th>6</th>
      <td>political_science-political_obligation</td>
      <td>0.130682</td>
    </tr>
    <tr>
      <th>7</th>
      <td>political_science-retslægerådet</td>
      <td>0.130435</td>
    </tr>
    <tr>
      <th>8</th>
      <td>sociology-authority_(sociology)</td>
      <td>0.126411</td>
    </tr>
    <tr>
      <th>9</th>
      <td>political_science-implied_powers</td>
      <td>0.119617</td>
    </tr>
    <tr>
      <th>10</th>
      <td>sociology-delegated_authority</td>
      <td>0.111111</td>
    </tr>
    <tr>
      <th>11</th>
      <td>political_science-institute_of_parliamentary_a...</td>
      <td>0.108280</td>
    </tr>
    <tr>
      <th>12</th>
      <td>political_science-universal_law</td>
      <td>0.101695</td>
    </tr>
    <tr>
      <th>13</th>
      <td>sociology-tripartite_classification_of_authority</td>
      <td>0.101190</td>
    </tr>
    <tr>
      <th>14</th>
      <td>economics-hans-bernd_schäfer</td>
      <td>0.100000</td>
    </tr>
    <tr>
      <th>15</th>
      <td>political_science-promulgation_(catholic_canon...</td>
      <td>0.098876</td>
    </tr>
    <tr>
      <th>16</th>
      <td>political_science-vacatio_legis</td>
      <td>0.098726</td>
    </tr>
    <tr>
      <th>17</th>
      <td>sociology-yhprum's_law</td>
      <td>0.094488</td>
    </tr>
    <tr>
      <th>18</th>
      <td>political_science-list_of_national_legal_systems</td>
      <td>0.093230</td>
    </tr>
    <tr>
      <th>19</th>
      <td>economics-thrift_institution</td>
      <td>0.090909</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>For topic 7, we infer it to regard administrative science. While the most probable words are ‘law’, ‘power’, and ‘institution’, we also see how the topic is the majority contributor in an overweight of political science documents which suggest the topic to be political science-related. This topic is one of our more or less ‘pure’ discipline topics. Let’s take a look at one of our more interdiciplinary topics:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># let&#39;s take a look at the 20 most probable articlesfor this topic</span>
<span class="n">topic5</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">article_names</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="n">probabilities</span><span class="p">[</span><span class="mi">5</span><span class="p">])),</span> 
             <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;topic: statistical methods&#39;</span><span class="p">,</span> <span class="s1">&#39;probability&#39;</span><span class="p">])</span>
<span class="n">topic5</span><span class="p">[:</span><span class="mi">20</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>topic: statistical methods</th>
      <th>probability</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>political_science-total_survey_error</td>
      <td>0.278846</td>
    </tr>
    <tr>
      <th>1</th>
      <td>political_science-non-sampling_error</td>
      <td>0.271186</td>
    </tr>
    <tr>
      <th>2</th>
      <td>economics-kitchen_sink_regression</td>
      <td>0.218750</td>
    </tr>
    <tr>
      <th>3</th>
      <td>psychology-list_of_backmasked_messages</td>
      <td>0.200000</td>
    </tr>
    <tr>
      <th>4</th>
      <td>economics-analysis_of_rhythmic_variance</td>
      <td>0.170213</td>
    </tr>
    <tr>
      <th>5</th>
      <td>psychology-psychological_statistics</td>
      <td>0.166909</td>
    </tr>
    <tr>
      <th>6</th>
      <td>economics-cash_flow_hedge</td>
      <td>0.166667</td>
    </tr>
    <tr>
      <th>7</th>
      <td>political_science-administrative_error</td>
      <td>0.166667</td>
    </tr>
    <tr>
      <th>8</th>
      <td>economics-variance_risk_premium</td>
      <td>0.161290</td>
    </tr>
    <tr>
      <th>9</th>
      <td>economics-correlation_trading</td>
      <td>0.148936</td>
    </tr>
    <tr>
      <th>10</th>
      <td>economics-truncated_regression_model</td>
      <td>0.144068</td>
    </tr>
    <tr>
      <th>11</th>
      <td>psychology-repeatability</td>
      <td>0.141593</td>
    </tr>
    <tr>
      <th>12</th>
      <td>economics-average_fixed_cost</td>
      <td>0.140845</td>
    </tr>
    <tr>
      <th>13</th>
      <td>economics-economic_puzzle</td>
      <td>0.139535</td>
    </tr>
    <tr>
      <th>14</th>
      <td>psychology-reliability_(statistics)</td>
      <td>0.137624</td>
    </tr>
    <tr>
      <th>15</th>
      <td>sociology-list_of_countries_by_share_of_income...</td>
      <td>0.136364</td>
    </tr>
    <tr>
      <th>16</th>
      <td>political_science-data_editing</td>
      <td>0.135802</td>
    </tr>
    <tr>
      <th>17</th>
      <td>economics-cost_accrual_ratio</td>
      <td>0.135135</td>
    </tr>
    <tr>
      <th>18</th>
      <td>political_science-tim_holt_(statistician)</td>
      <td>0.123711</td>
    </tr>
    <tr>
      <th>19</th>
      <td>political_science-scale_analysis_(statistics)</td>
      <td>0.123711</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Statistical methods is one of our most interdisciplinary topics as it is present in articles from all disciplines. We find in particular that articles from psychology, political science and economics are related to the topic suggesting that statistical methods is a topic of interdisciplinary character. Intuitively, this aligns with our understanding of the different disciplines as statistical inference and causality traditionally both are strived for in academic work from these fields and thus involve well-known methods related to this topic which would be written about on Wikipedia.
Since the distribution of wikipedia articles between disciplines is skewed towards political science, we find many political science-related topics in general as well as articles in each topic.</p>
</div>
<div class="section" id="bipartite-network-of-10-topics-articles">
<h2>Bipartite network of 10 topics-articles<a class="headerlink" href="#bipartite-network-of-10-topics-articles" title="Permalink to this headline">¶</a></h2>
<p>We want to visualize the topics and their related articles as well as their related words in two separate bipartite networks. The topics will be one type of nodes and the articles another type. Links represents articles connected to the given topic. The links are further weigthed by the probabilities for an article to be contributing/explanatory of the topic.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># we ready the data for the network by creating lists of the topic, article name and probability</span>
<span class="n">w</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">article_names</span><span class="p">)):</span>
    <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">article_names</span><span class="p">[</span><span class="mi">0</span><span class="p">])):</span>
        <span class="n">w</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">topics</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">article_names</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">element</span><span class="p">],</span><span class="n">probabilities</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">element</span><span class="p">]])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># bipartite network x graph object of topic-articles</span>
<span class="n">B</span><span class="o">=</span><span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
<span class="n">B</span><span class="o">.</span><span class="n">add_nodes_from</span><span class="p">(</span><span class="n">bipart_nx</span><span class="p">[</span><span class="s1">&#39;source&#39;</span><span class="p">],</span> <span class="n">bipartite</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">B</span><span class="o">.</span><span class="n">add_nodes_from</span><span class="p">(</span><span class="n">bipart_nx</span><span class="p">[</span><span class="s1">&#39;target&#39;</span><span class="p">],</span> <span class="n">bipartite</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">B</span><span class="o">.</span><span class="n">add_weighted_edges_from</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">edge_list</span> <span class="o">=</span> <span class="p">[(</span><span class="n">edge</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="n">edge</span><span class="o">.</span><span class="n">target</span><span class="p">,</span> <span class="n">edge</span><span class="o">.</span><span class="n">weight</span><span class="p">)</span> <span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="n">bipart_nx</span><span class="o">.</span><span class="n">itertuples</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)]</span>
<span class="n">node_atributes</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">bipart_nx</span><span class="p">[</span><span class="s1">&#39;source&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="o">+</span> <span class="n">bipart_nx</span><span class="p">[</span><span class="s1">&#39;target&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span> <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;node&#39;</span><span class="p">])</span>
<span class="n">node_atributes</span><span class="p">[</span><span class="s1">&#39;category&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">node_atributes</span><span class="p">[</span><span class="s1">&#39;node&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s1">&#39;target&#39;</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">bipart_nx</span><span class="p">[</span><span class="s1">&#39;target&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="k">else</span> <span class="s1">&#39;source&#39;</span><span class="p">)</span>
<span class="n">node_atributes</span><span class="p">[</span><span class="s1">&#39;node_attr&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">node_atributes</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span>
<span class="n">node_atributes</span><span class="p">[</span><span class="s1">&#39;node_attr&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">node_atributes</span><span class="p">[</span><span class="s1">&#39;node_attr&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s1">&#39;topic&#39;</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">node_atributes</span><span class="p">[</span><span class="s1">&#39;node&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="k">else</span> <span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pickle</span> 
<span class="n">node_atributes</span><span class="o">.</span><span class="n">to_pickle</span><span class="p">(</span><span class="s1">&#39;node_attributes.pkl&#39;</span><span class="p">)</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;weighted_edge_list.pkl&#39;</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">edge_list</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
    
<span class="c1">#edge_list.to_pickle(&#39;weighted_edge_list.pkl&#39;)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="insert-interactive-graph-of-topics-articles">
<h1>insert interactive graph of topics-articles<a class="headerlink" href="#insert-interactive-graph-of-topics-articles" title="Permalink to this headline">¶</a></h1>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "MatPiq/DTU-social-graphs-project-book",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="explainer_community_detection.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Community detection</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="explainer_embeddings.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Document and Node Embeddings</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By Frederik Kilpinen, Emilie Munch Gregersen, Matias Piqueras<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>